<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lettore Barcode Universale</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 20px;
  }
  #camera {
    width: 100%;
    max-width: 400px;
    margin: 0 auto;
    border: 1px solid #ccc;
  }
  #result {
    margin-top: 20px;
    font-size: 1.2em;
    font-weight: bold;
  }
</style>
</head>
<body>

<h1>Lettore di Barcode</h1>
<div id="camera"></div>
<div id="result">Nessun barcode rilevato</div>

<script>
  // Inizializza QuaggaJS
  Quagga.init({
    inputStream: {
      name: "Live",
      type: "LiveStream",
      target: document.querySelector('#camera'),
      constraints: {
        facingMode: "environment" // Fotocamera posteriore
      },
    },
    decoder: {
      readers: ["code_128_reader", "ean_reader", "ean_8_reader", "code_39_reader"]
    },
  }, function(err) {
    if (err) {
      console.error(err);
      document.getElementById('result').textContent = "Errore inizializzazione QuaggaJS";
      return;
    }
    Quagga.start();
  });

  // Rileva barcode e mostra il risultato
  Quagga.onDetected(function(result) {
    if (result && result.codeResult && result.codeResult.code) {
      const code = result.codeResult.code;
      document.getElementById('result').textContent = "Barcode rilevato: " + code;
      console.log("Barcode:", code);
    }
  });
</script>

</body>
</html>





